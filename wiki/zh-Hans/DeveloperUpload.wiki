#summary 处理文件上传

= 处理文件上传 =

WebWind通过集成[http://commons.apache.org/fileupload/ Commons FileUpload]支持文件上传。无需任何配置，只需将`commons-fileupload-1.2.x.jar`放入`/WEB-INF/lib/`目录下即可。如果没有找到Commons FileUpload，文件上传功能就被禁用。

处理文件上传非常简单：

{{{
public class FileUpload {
    @Mapping("/fileupload")
    public String post() throws Exception {
        HttpServletRequest request = ActionContext.getActionContext().getHttpServletRequest();
        if (request instanceof MultipartHttpServletRequest) {
            MultipartHttpServletRequest multipartRequest = (MultipartHttpServletRequest) request;
            // we are assume that file is uploaded with field name 'myfile':
            String filename = multipartRequest.getFileName("myfile");
            // now get file name like 'C:\WINDOWS\Notepad.ini'...
            InputStream input = multipartRequest.getFileInputStream("myfile");
            // TODO: read file content here...
            input.close();
            return "redirect:/upload-success.htm";
        }
        throw new IOException("Not a multipart request!");
    }
}
}}}

普通的Form字段可以通过`HttpServletRequest.getParameter(String)`正常读取。

请注意，WebWind仅支持[http://commons.apache.org/fileupload/ Commons FileUpload] 1.2.0或更高版本。
